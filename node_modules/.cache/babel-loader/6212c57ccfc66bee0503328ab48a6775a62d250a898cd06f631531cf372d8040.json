{"ast":null,"code":"const delay = ms => new Promise(resolve => setTimeout(resolve, ms));\nexport const fetchQuizQuestions = async (amount = 10) => {\n  try {\n    // Add delay to prevent rate limiting\n    await delay(1000);\n    const response = await fetch(`https://opentdb.com/api.php?amount=10&category=18&difficulty=medium&type=multiple`, {\n      headers: {\n        'Accept': 'application/json'\n      }\n    });\n    if (response.status === 429) {\n      throw new Error('Too many requests. Please wait a moment and try again.');\n    }\n    if (!response.ok) {\n      throw new Error(`Network response was not ok: ${response.status}`);\n    }\n    const data = await response.json();\n    if (data.response_code !== 0 || !data.results) {\n      throw new Error('Failed to fetch questions from API');\n    }\n    return data.results.map(question => ({\n      id: Math.random(),\n      question: decodeHTML(question.question),\n      options: shuffleArray([...question.incorrect_answers, question.correct_answer].map(decodeHTML)),\n      correctAnswer: decodeHTML(question.correct_answer)\n    }));\n  } catch (error) {\n    console.error('Failed to fetch:', error);\n    throw error;\n  }\n};\nconst decodeHTML = html => {\n  const txt = document.createElement('textarea');\n  txt.innerHTML = html;\n  return txt.value;\n};\nconst shuffleArray = array => {\n  return [...array].sort(() => Math.random() - 0.5);\n};","map":{"version":3,"names":["delay","ms","Promise","resolve","setTimeout","fetchQuizQuestions","amount","response","fetch","headers","status","Error","ok","data","json","response_code","results","map","question","id","Math","random","decodeHTML","options","shuffleArray","incorrect_answers","correct_answer","correctAnswer","error","console","html","txt","document","createElement","innerHTML","value","array","sort"],"sources":["C:/folder mata kuliah/magang dot/quiz-app-react/src/service/quizService.ts"],"sourcesContent":["import { Question } from '../types';\r\n\r\ninterface OpenTDBResponse {\r\n  response_code: number;\r\n  results: {\r\n    category: string;\r\n    type: string;\r\n    difficulty: string;\r\n    question: string;\r\n    correct_answer: string;\r\n    incorrect_answers: string[];\r\n  }[];\r\n}\r\n\r\nconst delay = (ms: number) => new Promise(resolve => setTimeout(resolve, ms));\r\n\r\nexport const fetchQuizQuestions = async (amount: number = 10): Promise<Question[]> => {\r\n  try {\r\n    // Add delay to prevent rate limiting\r\n    await delay(1000);\r\n\r\n    const response = await fetch(\r\n      `https://opentdb.com/api.php?amount=10&category=18&difficulty=medium&type=multiple`,\r\n      {\r\n        headers: {\r\n          'Accept': 'application/json',\r\n        },\r\n      }\r\n    );\r\n    \r\n    if (response.status === 429) {\r\n      throw new Error('Too many requests. Please wait a moment and try again.');\r\n    }\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`Network response was not ok: ${response.status}`);\r\n    }\r\n\r\n    const data: OpenTDBResponse = await response.json();\r\n\r\n    if (data.response_code !== 0 || !data.results) {\r\n      throw new Error('Failed to fetch questions from API');\r\n    }\r\n\r\n    return data.results.map((question) => ({\r\n      id: Math.random(),\r\n      question: decodeHTML(question.question),\r\n      options: shuffleArray([\r\n        ...question.incorrect_answers,\r\n        question.correct_answer\r\n      ].map(decodeHTML)),\r\n      correctAnswer: decodeHTML(question.correct_answer)\r\n    }));\r\n  } catch (error) {\r\n    console.error('Failed to fetch:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nconst decodeHTML = (html: string): string => {\r\n  const txt = document.createElement('textarea');\r\n  txt.innerHTML = html;\r\n  return txt.value;\r\n};\r\n\r\nconst shuffleArray = <T>(array: T[]): T[] => {\r\n  return [...array].sort(() => Math.random() - 0.5);\r\n};"],"mappings":"AAcA,MAAMA,KAAK,GAAIC,EAAU,IAAK,IAAIC,OAAO,CAACC,OAAO,IAAIC,UAAU,CAACD,OAAO,EAAEF,EAAE,CAAC,CAAC;AAE7E,OAAO,MAAMI,kBAAkB,GAAG,MAAAA,CAAOC,MAAc,GAAG,EAAE,KAA0B;EACpF,IAAI;IACF;IACA,MAAMN,KAAK,CAAC,IAAI,CAAC;IAEjB,MAAMO,QAAQ,GAAG,MAAMC,KAAK,CAC1B,mFAAmF,EACnF;MACEC,OAAO,EAAE;QACP,QAAQ,EAAE;MACZ;IACF,CACF,CAAC;IAED,IAAIF,QAAQ,CAACG,MAAM,KAAK,GAAG,EAAE;MAC3B,MAAM,IAAIC,KAAK,CAAC,wDAAwD,CAAC;IAC3E;IAEA,IAAI,CAACJ,QAAQ,CAACK,EAAE,EAAE;MAChB,MAAM,IAAID,KAAK,CAAC,gCAAgCJ,QAAQ,CAACG,MAAM,EAAE,CAAC;IACpE;IAEA,MAAMG,IAAqB,GAAG,MAAMN,QAAQ,CAACO,IAAI,CAAC,CAAC;IAEnD,IAAID,IAAI,CAACE,aAAa,KAAK,CAAC,IAAI,CAACF,IAAI,CAACG,OAAO,EAAE;MAC7C,MAAM,IAAIL,KAAK,CAAC,oCAAoC,CAAC;IACvD;IAEA,OAAOE,IAAI,CAACG,OAAO,CAACC,GAAG,CAAEC,QAAQ,KAAM;MACrCC,EAAE,EAAEC,IAAI,CAACC,MAAM,CAAC,CAAC;MACjBH,QAAQ,EAAEI,UAAU,CAACJ,QAAQ,CAACA,QAAQ,CAAC;MACvCK,OAAO,EAAEC,YAAY,CAAC,CACpB,GAAGN,QAAQ,CAACO,iBAAiB,EAC7BP,QAAQ,CAACQ,cAAc,CACxB,CAACT,GAAG,CAACK,UAAU,CAAC,CAAC;MAClBK,aAAa,EAAEL,UAAU,CAACJ,QAAQ,CAACQ,cAAc;IACnD,CAAC,CAAC,CAAC;EACL,CAAC,CAAC,OAAOE,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,kBAAkB,EAAEA,KAAK,CAAC;IACxC,MAAMA,KAAK;EACb;AACF,CAAC;AAED,MAAMN,UAAU,GAAIQ,IAAY,IAAa;EAC3C,MAAMC,GAAG,GAAGC,QAAQ,CAACC,aAAa,CAAC,UAAU,CAAC;EAC9CF,GAAG,CAACG,SAAS,GAAGJ,IAAI;EACpB,OAAOC,GAAG,CAACI,KAAK;AAClB,CAAC;AAED,MAAMX,YAAY,GAAOY,KAAU,IAAU;EAC3C,OAAO,CAAC,GAAGA,KAAK,CAAC,CAACC,IAAI,CAAC,MAAMjB,IAAI,CAACC,MAAM,CAAC,CAAC,GAAG,GAAG,CAAC;AACnD,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}